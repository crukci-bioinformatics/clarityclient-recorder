<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2019-07-05 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>CRUK-CI Genologics API Client Recorder &#x2013; </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                CRUK-CI Genologics API Recorder
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2019-07-05</span>
                  &nbsp;| <span id="projectVersion">Version: 2.24-SNAPSHOT</span>
                      </div>
            <div class="xright">      
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>User Guide</h5>
                  <ul>
                  <li class="none">
                          <a href="installing.html" title="Installation">Installation</a>
            </li>
                                                                                          <li class="expanded">
                          <a href="usageoverview.html" title="Usage">Usage</a>
                    <ul>
                      <li class="none">
                          <a href="spring.html" title="Spring Configuration">Spring Configuration</a>
            </li>
                      <li class="none">
            <strong>Basic Usage</strong>
          </li>
              </ul>
        </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                 
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2><a name="Setting_the_Message_Directory"></a>Setting the Message Directory</h2>
<p>The record and playback wrappers around the Clarity client need no additional configuration beyond what is supplied in the Spring files. The one property that the user might want to change is the directory the server's messages are written to, or the pretend server reads from.</p>
<p>By default, both the recording and playback aspects write and read into a directory <tt>serverexchanges</tt> in the current working directory. This can be configured by setting the <i>messagesDirectory</i> property in Spring configuration, or fetching the aspect in code and setting the property:</p>
<div class="source">
<pre>ApplicationContext appContext =
    new ClassPathXmlApplicationContext(
        &quot;/org/cruk/genologics/api/genologics-client-context.xml&quot;,
        &quot;/org/cruk/genologics/api/genologics-record-context.xml&quot;);

GenologicsAPIRecordingAspect aspect = ctx.getBean(GenologicsAPIRecordingAspect.class);
aspect.setMessageDirectory(new File(&quot;target/messages&quot;));</pre></div>
<p>Similarly, for playback:</p>
<div class="source">
<pre>ApplicationContext appContext =
    new ClassPathXmlApplicationContext(
        &quot;/org/cruk/genologics/api/genologics-client-context.xml&quot;,
        &quot;/org/cruk/genologics/api/genologics-playback-context.xml&quot;);

GenologicsAPIPlaybackAspect playbackAspect = ctx.getBean(GenologicsAPIPlaybackAspect.class);
playbackAspect.setMessageDirectory(new File(&quot;src/test/messages&quot;));</pre></div>
<p>This directory is not automatically created, so when recording make sure that it exists before communicating with the server.</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2013&#x2013;2019
                        <a href="http://www.cruk.cam.ac.uk">Cancer Research UK Cambridge Institute</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
